{# Header Evento Unificato - Usato in Gestione e Dettaglio #}
{% macro render_evento_header(evento) %}
<section class="card" style="border-left: 4px solid {% if evento.stato_pubblico == 'attivo' %}#3fc380{% elif evento.stato_pubblico == 'programmato' %}#d4af37{% else %}#6b7280{% endif %};">
  <div class="card__header" style="padding: var(--spacing-4);">
    <div style="display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: var(--spacing-3);">
      <!-- Nome e Info -->
      <div style="flex: 1; min-width: 200px;">
        <h1 style="font-size: var(--font-size-xl); font-weight: var(--font-weight-bold); margin: 0 0 var(--spacing-2); color: var(--admin-text);">
          {{ evento.nome_evento }}
        </h1>
        <div style="display: flex; align-items: center; gap: var(--spacing-3); flex-wrap: wrap;">
          <span style="font-size: var(--font-size-sm); color: var(--color-text-muted);">
            ğŸ“… {{ evento.data_evento.strftime('%d/%m/%Y') if evento.data_evento else 'Data da definire' }}
          </span>
          {% if evento.dj_artista %}
          <span style="font-size: var(--font-size-sm); color: var(--color-text-muted);">
            ğŸ§ {{ evento.dj_artista }}
          </span>
          {% endif %}
        </div>
      </div>

      <!-- Stato e Badge -->
      <div style="display: flex; align-items: center; gap: var(--spacing-2); flex-wrap: wrap;">
        <span class="badge badge--{{ 'success' if evento.stato_pubblico == 'attivo' else 'primary' if evento.stato_pubblico == 'programmato' else 'secondary' }}" style="font-size: var(--font-size-sm); padding: var(--spacing-2) var(--spacing-3);">
          {% if evento.stato_pubblico == 'attivo' %}âœ… ATTIVO{% elif evento.stato_pubblico == 'programmato' %}ğŸ“‹ PROGRAMMATO{% else %}ğŸ”’ CHIUSO{% endif %}
        </span>
      </div>

      <!-- Azioni Principali -->
      <div style="display: flex; align-items: center; gap: var(--spacing-2); flex-wrap: wrap;">
        {% if evento.stato_pubblico == 'attivo' %}
        <a href="{{ url_for('eventi.admin_edit', evento_id=evento.id_evento) }}" class="btn btn--primary btn--small">âœï¸ Modifica</a>
        <form method="post" action="{{ url_for('eventi.admin_duplicate', evento_id=evento.id_evento) }}" style="display: inline;">
          <button type="submit" class="btn btn--secondary btn--small" title="Duplica evento">ğŸ“‹ Duplica</button>
        </form>
        {% endif %}
        
        <!-- Pulsanti Apri/Chiudi Evento -->
        {% if evento.stato_pubblico == 'attivo' %}
        <form method="post" action="{{ url_for('eventi.admin_set_stato', evento_id=evento.id_evento, stato='chiuso') }}" style="display: inline;" onsubmit="return confirm('Chiudere l\'evento? Staff e pubblico saranno disattivati automaticamente.');">
          <button type="submit" class="btn btn--secondary btn--small" title="Chiudi evento">ğŸ”’ Chiudi Evento</button>
        </form>
        {% else %}
        <form method="post" action="{{ url_for('eventi.admin_set_stato', evento_id=evento.id_evento, stato='attivo') }}" style="display: inline;" onsubmit="return confirm('Aprire l\'evento? Staff e pubblico saranno attivati automaticamente.');">
          <button type="submit" class="btn btn--primary btn--small" title="Apri evento">âœ… Apri Evento</button>
        </form>
        {% endif %}
        
        <form method="post" action="{{ url_for('eventi.admin_delete', evento_id=evento.id_evento) }}" style="display: inline;" onsubmit="return confirm('Eliminare definitivamente questo evento? Questa azione non puÃ² essere annullata e eliminerÃ  tutte le prenotazioni, ingressi, consumi e feedback associati.');">
          <button type="submit" class="btn btn--danger btn--small" title="Elimina evento definitivamente">ğŸ—‘ï¸ Elimina</button>
        </form>
      </div>
    </div>
  </div>
</section>

{% endmacro %}
