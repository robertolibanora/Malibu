{% extends "shared/base.html" %}
{% block title %}{% block staff_title %}Staff{% endblock %} - MalibÃ¹{% endblock %}

{% block body_class %}staff-section{% endblock %}

{% block extra_head %}
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/staff.css') }}">
{% endblock %}

{% block header_nav %}
  {% set staff_role = session.get('staff_role', '') %}
  {% set is_scanner = request.endpoint in ('staff.scan_unificato', 'ingressi.staff_scan', 'consumi.staff_scan_listino', 'consumi.staff_listino') %}
  <nav class="staff-nav app__header-nav" role="navigation" aria-label="Navigazione principale staff">
    <div class="staff-nav__brand">
      <span class="staff-nav__logo">
        <img 
          src="{{ url_for('static', filename='img/logo.png') }}" 
          alt="MalibÃ¹" 
          class="staff-nav__logo-img">
      </span>
    </div>
    
    <ul class="staff-nav__menu">
      <!-- Scanner Unificato - Punto d'ingresso principale -->
      <li class="staff-nav__item">
        <a href="{{ url_for('staff.scan_unificato') }}" 
           class="staff-nav__link {% if is_scanner %}staff-nav__link--active{% endif %}"
           aria-label="Scanner principale">
          <span class="staff-nav__icon">ğŸ“±</span>
          <span class="staff-nav__text">Scanner</span>
        </a>
      </li>
      
      <!-- Evento -->
      <li class="staff-nav__item">
        <a href="{{ url_for('eventi.staff_select_event') }}" 
           class="staff-nav__link {% if request.endpoint and request.endpoint.startswith('eventi.staff') %}staff-nav__link--active{% endif %}"
           aria-label="Info evento">
          <span class="staff-nav__icon">ğŸ¯</span>
          <span class="staff-nav__text">Evento</span>
        </a>
      </li>
      
      <!-- FedeltÃ  (utile per verifiche rapide) -->
      <li class="staff-nav__item">
        <a href="{{ url_for('fedelta.staff_quick') }}" 
           class="staff-nav__link {% if request.endpoint and request.endpoint.startswith('fedelta.staff') %}staff-nav__link--active{% endif %}"
           aria-label="Verifica punti fedeltÃ ">
          <span class="staff-nav__icon">â­</span>
          <span class="staff-nav__text">Punti</span>
        </a>
      </li>

      <!-- Ordini (per chi gestisce il bar) -->
      {% if staff_role in ('barista', 'admin') %}
      <li class="staff-nav__item">
        <a href="{{ url_for('consumi.staff_ordini') }}" 
           class="staff-nav__link {% if request.endpoint == 'consumi.staff_ordini' %}staff-nav__link--active{% endif %}"
           aria-label="Storico ordini">
          <span class="staff-nav__icon">ğŸ“‹</span>
          <span class="staff-nav__text">Ordini</span>
        </a>
      </li>
      {% endif %}

      <!-- Logout -->
      <li class="staff-nav__item staff-nav__item--secondary">
        <a href="{{ url_for('auth.logout') }}" 
           class="staff-nav__link staff-nav__link--logout"
           aria-label="Esci dal sistema">
          <span class="staff-nav__icon">ğŸšª</span>
          <span class="staff-nav__text">Esci</span>
        </a>
      </li>
    </ul>
  </nav>
{% endblock %}

{% block content %}
  {% block staff_content %}{% endblock %}
{% endblock %}

